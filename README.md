## Fandemonium.pl

Stare strony internetowe nie słyną z dobrych zabezpieczeń, podobnie jest z fandemonium które wciąż cieszy się pewną popularnością,
do sprawdzenia jej skłonił mnie dość zabawny błąd, który można zobrazować tym "krótkim" url [fandemonium.pl/ifgprtl123456789u3h423...](https://fandemonium.pl/ifgprtl123456789u3h423iou4iouf83io4234iom4iomfdl;sm3fslk8ou4ifdl;smfslka438ou4iouf8io4234iomfdl;smfslka43875ofkodssakfdosakfposao4iouf8io4234iomfdl;smfslka43875ofkodssakfdo75ofkodssakfdosakfposao4iouf8io4234iomfdl;smfslka43875ofkodssakfdosakf3iou4iouf8io4234iomfdl;smfslka43875ofkodssakfdosakfposao4iouf8io4234iomfdl;smfslka43875ofkodssakfdosakfposaodsaj[piofdsapofdsaiogsargioerfdgpodsaj[piofdsapofdsaiogsargioerfdgpodsasakfdosakfposaodsaj[piofd4iouf8io4234iomfdl;smfslka43875ofkodssakfdosakfposaodsaj[piofdsapofdsaiogsargioerfdgpodsaj[piofdsapofdsaiogsargioerfdgpodsasakfdosakfposaodsaj[piofd4iouf8io4234iomfdl;smfslka43875ofkodssakfdosakfposaodsaj[piofdsapofdsaiogsargioerfdgpodsaj[piofdsapofdsaiogsargioerfdgpodsasakfdosakfposaodsaj[piofd4iouf8io4234iomfdl;smfslka43875ofkodssakfdosakfposaodsaj[piofdsapofdsaiogsargioerfdgpodsaj[piofdsapofdsaiogsargioerfdgpodsasakfdosakfposaodsaj[piofd4iouf8io4234iomfdl;smfslka43875ofkodssakfdosakfposaodsaj[piofdsapofdsaiogsargioerfdgpodsaj[piofdsapofdsaiogsargioerfdgpodsasakfdosakfposaodsaj[piofd4iouf8io4234iomfdl;smfslka43875ofkodssakfdosakfposaodsaj[piofdsapofdsaiogsargioerfdgpodsaj[piofdsapofdsaiogsargioerfdgpodsasakfdosakfposaodsaj[piofd4iouf8io4234iomfdl;smfslka43875ofkodssakfdosakfposaodsaj[piofdsapofdsaiogsargioerfdgpodsaj[piofdsapofdsaiogsargioerfdgpodsasakfdosakfposaodsaj[piofd4iouf8io4234iomfdl;smfslka43875ofkodssakfdosakfposaodsaj[piofdsapofdsaiogsargioerfdgpodsaj[piofdsapofdsaiogsargioerfdgpodsasakfdosakfposaodsaj[piofd4iouf8io4234iomfdl;smfslka43875ofkodssakfdosakfposaodsaj[piofdsapofdsaiogsargioerfdgpodsaj[piofdsapofdsaiogsargioerfdgpodsasakfdosakfposaodsaj[piofddsaj[piofdsapofdsaiogsargioerfdgpodsaj[piofdsapofdsaiogsargioerfdgpodsasakfdosakfposaodsaj[piofd4iouf8io4234iomfdl;smfslka43875ofkodssakfdosakfposaodsaj[piofdsapofdsaiogsargioerfdgpodsaj[piofdsapofdsaiogsargioerfdgpodsasakfdosakfposaodsaj[piofd4iouf8io4234iomfdl;smfslka43875ofkodssakfdosakfposaodsaj[piofdsapofdsaiogsargioerfdgpodsaj[piofdsapofdsaiogsargioerfdgpodsasakfdosakfposaodsaj[piofd4iouf8io4234iomfdl;smfslka43875ofkodssakfdosakfposaodsaj[piofdsapofdsaiogsargioerfdgpodsaj[piofdsapofdsaiogsargioerfdgpodsasakfdosakfposaodsaj[piofd4iouf8io4234iomfdl;smfslka43875ofkodssakfdosakfposaodsaj[piofdsapofdsaiogsargioerfdgpodsaj[piofdsapofdsaiogsargioerfdgpodsasakfdosakfposaodsaj[piofd4iouf8io4234iomfdl;smfslka43875ofkodssakfdosakfposaodsaj[piofdsapofdsaiogsargioerfdgpodsaj[piofdsapofdsaiogsargioerfdgpodsasakfdosakfposaodsaj[piofd4iouf8io4234iomfdl;smfslka43875ofkodssakfdosakfposaodsaj[piofdsapofdsaiogsargioerfdgpodsaj[piofdsapofdsaiogsargioerfdgpodsasakfdosakfposaodsaj[piofd4iouf8io4234iomfdl;smfslka43875ofkodssakfdosakfposaodsaj[piofdsapofdsaiogsargioerfdgpodsaj[piofdsapofdsaiogsargioerfdgpodsasakfdosakfposaodsaj[piofd4iouf8io4234iomfdl;smfslka43875ofkodssakfdosakfposaodsaj[piofdsapofdsaiogsargioerfdgpodsaj[piofdsapofdsaiogsargioerfdgpodsasakfdosakfposaodsaj[piofdsapofdsaiogsargioerfdgpodsaj[piofdsapofdsaiogsargioerfdgpodsasakfdosakfposaodsaj[piofdsapofdsaiogsargioerfdgpodsaj[piofdsapofdsaiogsargioerfdgpodsasakfdosakfposaodsaj[piofdsapofdsaiogsargioerfdgpodsaj[piofdsapofdsaiogsargioerfdgpodsasakfdosakfposaodsaj[piofdsapofdsaiogsargioerfdgpodsaj[piofdsapofdsaiogsargioerfdgpodsasakfdosakfposaodsaj[piofdsapofdsaiogsargioerfdgpodsaj[piofdsapofdsaiogsargioerfdgpodsaakfdosakfposaodsaj[piofdsapofdsaiogsargioerfdgpodsaj[piofdsapofdsaiogsargioerfdgpodsaj[piofdsapofdsaiogsargioerfdgpodsaj[piofdsapofdsaiogsargioerfdgpodsaj[piofdsapofdsaiogsargioerfdgpodsaj[piofdsapofdsaiogsargioerfdgpodsaj[piofdsapofdsaiogsargioerfdgpodsaj[piofdsapofdsaiogsargioerfdgpodsaj[piofdsapofdsaiogsargioerfdgpodsaj[piofdsapofdsaiogsargioerfdgpodsaj[piofdsapofdsaiogsargioerfdgpodsaj[piofdsapofdsaiogsargioerfdgpodsaj[piofdsapofdsaiogsargioerfdgpkpofdsjofkjodsaj[piofdsapofdsaiogsargioerfdgpiowernjmofkodsakfdosakfposakpofdsjofkjodsaj[piofdsapofdsaiogsargioerfdgpiowernjmofkodsakfdosakfposakpofdsjofkjodsaj[piofdsapofdsaiogsargioerfdgpiowernjmofkodsakfdosakfposakpofdsjofkjodsaj[piofdsapofdsaiogsargioerfdgpiowernjmofkodsakfdosakfposakpofdsjofkjodsaj[piofdsapofdsaiogsargioerfdgpiowernjmofkodsakfdosakfposakpofdsjofkjodsaj[piofdsapofdsaiogsargioerfdgpiowernjmofkodsakfdosakfposakpofdsjofkjodsaj[piofdsapofdsaiogsargioerfdgpiowernjmofkodsakfdosakfposakpofdsjofkjodsaj[piofdsapofdsaiogsargioerfdgpiowernjm24398759782437598439857439825984327985943825984329875984235984379543985790874359864237906y490258690458690804380524374372874372585858585575756569766997997999999989999999999488474777477777666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666666iofjdsjpodsajkf[podsiofdsfikdsafidsjpofdsjafj[piodsajpofds[ofkodsakfdosakfposakpofdsjofkjodsaj[piofdsapofdsaiogsargioerfdgpiowernjmofkodsakfdosakfposakpofdsjofkjodsaj[piofdsapofdsaiogsargioerfdgpiowernjmdfnsdjfnadskjnjfkdskjfdsakjkjfnjdsjfasndjndsdsjfnfndsfjdsfjsndjfsjndsfndsfnjnsjfnjdsfnjnffnjdsfndsjfdsfnjfndfnsjndsjfndsjfndsjffnjnjdfndsjfnsjdfnjfndsjdnhsdsfokhtpohiyktr0uo07=-6532hio4h2iou34iou2j34cio23io4c23h4334io234ioc3h2oi423io4cio234cio234c23h4iuch23iu4ch24chiu2cu423io45r982owejkjpofdwejiofdsazpfcsjzlkfcsal;kzjfvcsacIOSAhjposapioufcapvdshoifvdsjiouvdsapoviosuhvdszhvciodsavpioldadsafdsafdsahifdsafiuhdwesaufhudsafioudshiofdsahioufvhdsiouhfiosahiufdsiojfhgfsaudfusahiufhsaioufhiusahufisahufhsahioufcsauhfiousdjigjdsfjgpodfjphgkhdfpidsfpiodsjgfdsgfkjgodjgodsaforiohdesgrfjdgojrpiowsgrkilgrjpojgpowearjgfpodsajgpiojsio0[pvdsaiofsaofvjcdsaf9povsaiugaspiofcsajiodufsaudfhwpeofhjpsdfpiohsjd0ofiujoeiwfuiweriofwes90uiowefujdfviowurofuejdwsaiurwef8utf9igaue9pfufcsaoweripgrdesapg;dfjgpore%20jgdsigtwejrsgfkp[odsrogryrjyrtiokherpiormpwsrgpowesrkjgpoergowerpoglk9),
jest on najdłuższym bzdurnym adresem, na jaki odpowiada fandemonium i co ciekawe prowadzi on do tego mema:
<img align="left"
  src="https://github.com/DeVianney/fandemonium/blob/main/incydent.png">
</img>

Tylko dlaczego? Na fandemonium id nowego obrazka nie jest losowo generowane tylko inkrementowane i taką iteracją dochodzimy do obrazka fandemonium.pl/upload/file/404.png, pod który przekierowuje nas serwer, otrzymując kod 404, analogicznie dla innych kodów http.





**A teraz mała lista rzeczy do załatania.**


### Otwarte porty: 
```
  fandemonium.pl (79.96.24.117)
  PORT      STATE  SERVICE
  21/tcp    open   ftp       
  143/tcp   open   imap       
  465/tcp   open   smtps     
  1433/tcp  open   ms-sql-s
  3306/tcp  open   mysql
  5432/tcp  open   postgresql
```
![ftp](https://github.com/DeVianney/fandemonium/blob/main/ftp.png)

Rozwiązanie: ```Konfiguracja Firewalla ```
### Brak charsetu:
![charset](https://github.com/DeVianney/fandemonium/blob/main/charset.png)

Rozwiązanie: ```text/html;charset=utf-8 ```

### Wypisywanie błędów z php:
```
Deprecated: Function session_register() is deprecated in /inc/class.rejestracja.php on line 11
```
Rozwiązanie: ``` error_reporting(0); ini_set('display_errors', 0);```

### Brak flagi httponly
![httponly](https://github.com/DeVianney/fandemonium/blob/main/cookie.png)

Rozwiązanie:
```php
setcookie(
    string $name,
    string $value = "",
    int $expires = 0,
    string $path = "",
    string $domain = "",
    bool $secure = false,
    bool $httponly = false  <---- ustawić na true
): bool
```
### Zły Content-Type przez co captcha przychodzi w takiej formie [captchatxt](https://github.com/prkx/fandemonium/blob/main/captcha.php)
![Contentype](https://github.com/DeVianney/fandemonium/blob/main/ctype.png)

Rozwiązanie:
```php
<?php
header('Content-Type: image/jpeg');
?>
```
### Brak captchy przy logowaniu + pole login_try które nieważne ile razy się loguje, zawsze jest ustawione na 1.
![login](https://github.com/DeVianney/fandemonium/blob/main/login.png)
### Http z logowaniem..
Rozwiązanie: [link](https://www.widzialni.pl/blog/jak-przeniesc-strone-na-https-instrukcja-krok-po-kroku)

Chyba już wystarczy 
